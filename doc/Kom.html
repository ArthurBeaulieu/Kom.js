<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class: Kom | Kom.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Kom.js</a></h1>
        
            <span class="version">v0.0.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="Kom.html">Kom</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Kom_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Kom.html#_csrfToken">_csrfToken</a></li><li><a href="Kom.html#_headers">_headers</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Kom.html#._createRequestHeaders">_createRequestHeaders</a></li><li><a href="Kom.html#._getCsrfCookie">_getCsrfCookie</a></li><li><a href="Kom.html#._getErrorCodeFromHTTPStatus">_getErrorCodeFromHTTPStatus</a></li><li><a href="Kom.html#._resolveAsJSON">_resolveAsJSON</a></li><li><a href="Kom.html#._resolveAsRaw">_resolveAsRaw</a></li><li><a href="Kom.html#._resolveAsText">_resolveAsText</a></li><li><a href="Kom.html#.checkValidity">checkValidity</a></li><li><a href="Kom.html#.get">get</a></li><li><a href="Kom.html#.getRaw">getRaw</a></li><li><a href="Kom.html#.getText">getText</a></li><li><a href="Kom.html#.post">post</a></li></ul></div></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Kom<span class="signature">()</span><span class="type-signature"></span></h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dt>
    
        <h4 class="name" id="Kom">
            
                new <span class="type-signature"></span>Kom<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line20">line 20</a></code>
            </div>
            
        </h4>

        
        <p class="summary"><h1>Server communication abstraction</h1></p>
        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>This class is the main object to deal with when requesting something from the server.<br>
It handle all urls calls (<code>GET</code>, <code>POST</code>), treat responses or handle errors using
<code>Promise</code>.<br>Because it uses <code>Promise</code>, success and errors are to be handled in the caller
function, using <code>.then()</code> and <code>.catch()</code>. To properly deal with <code>POST</code> request,
the session must contain a csrf token in cookies. Otherwise, those <code>POST</code> call may fail.</blockquote>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    
    <dt class="tag-since">Since:</dt>
    <dd class="tag-since"><ul class="dummy"><li>June 2020</li></ul></dd>
    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>Arthur Beaulieu</li>
        </ul>
    </dd>
    

    

    

    

    

    

    
</dl>


    

</dd>

        
        </div>
    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            

<dt>
<h4 class="name" id="_csrfToken">
    <span class="type-signature"><span class="icon green">private</span> </span>_csrfToken<span class="type-signature"> :string</span>
    
    <div class="container-source members">
        <code><a href="Kom.js.html">Kom.js</a></code>,
        <code><a href="Kom.js.html#line23">line 23</a></code>
    </div>
    
</h4>


</dt>
<dd>
    
    <div class="description">
        <p>User session CSRF token to use in POST request</p>
    </div>
    

    <!--
    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">string</span>


            </li>
        </ul>
    
    -->

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
</dd>

        
            

<dt>
<h4 class="name" id="_headers">
    <span class="type-signature"><span class="icon green">private</span> </span>_headers<span class="type-signature"> :Array.&lt;array></span>
    
    <div class="container-source members">
        <code><a href="Kom.js.html">Kom.js</a></code>,
        <code><a href="Kom.js.html#line26">line 26</a></code>
    </div>
    
</h4>


</dt>
<dd>
    
    <div class="description">
        <p>Array of HTTP headers to be used in HTTP calls</p>
    </div>
    

    <!--
    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">Array.&lt;array></span>


            </li>
        </ul>
    
    -->

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
                

<dt>
    
        <h4 class="name" id="._createRequestHeaders">
            
                <span class="type-signature"><span class="icon green">private</span>, <span class="icon green">static</span> </span>_createRequestHeaders<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;array>}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line59">line 59</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Fills Kom <code>_headers</code> private member array, to use in HTTP requests later on.
This method is required to be called on construction.</blockquote>
    </div>
    

    

    

    

    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Array.&lt;array></span>





- <ul>
<li>The headers array, length 3, to be used in HTTP requests</li>
</ul>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="._getCsrfCookie">
            
                <span class="type-signature"><span class="icon green">private</span>, <span class="icon green">static</span> </span>_getCsrfCookie<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line35">line 35</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Extract CSRF token value from client cookies and returns it as a string. Returns an empty
string by default. This method is required to be called on construction.</blockquote>
    </div>
    

    

    

    

    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">string</span>





- <ul>
<li>The CSRF token string</li>
</ul>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="._getErrorCodeFromHTTPStatus">
            
                <span class="type-signature"><span class="icon green">private</span>, <span class="icon green">static</span> </span>_getErrorCodeFromHTTPStatus<span class="signature">(code)</span><span class="type-signature"> &rarr; {string}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line80">line 80</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>This method is called whenever a server request didn't went well. In case a request (from
any type) fails, its HTTP status code have to be handle in the method, so it returns an error code can be handled
in the user interface (with notification, console or else).</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>code</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last"><p>The HTTP status code to handle, in supported ones from HttpStatusCode enumeration</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">string</span>





- <p>The HTTP status as an error code</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="._resolveAsJSON">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">private</span>, <span class="icon green">static</span> </span>_resolveAsJSON<span class="signature">(response)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line102">line 102</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Tool method used by public methods on fetch responses to format output data as JSON to be
read in JavaScript code as objects.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>response</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>fetch</code> response object</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code>, format response as an object on resolve, as error code string on reject</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="._resolveAsRaw">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">private</span>, <span class="icon green">static</span> </span>_resolveAsRaw<span class="signature">(response)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line150">line 150</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Tool method used by XmlHTTPRequests to format server response as raw binary data.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>response</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>XmlHTTPRequest</code> response status object</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code>, doesn't format response on resolve, send error code string on reject</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="._resolveAsText">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">private</span>, <span class="icon green">static</span> </span>_resolveAsText<span class="signature">(response)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line126">line 126</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Tool method used by public methods on fetch responses to format output data as text to be
read in JavaScript code as string (mostly to parse HTML templates).</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>response</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>fetch</code> response object</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code>, format response as a string on resolve, as error code string on reject</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id=".checkValidity">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">static</span> </span>checkValidity<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line178">line 178</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote>Check the Kom instance validity to ensure its properties validity. Useful to call after
component instantiation to ensure all its headers are properly set.</blockquote>
    </div>
    

    

    

    

    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The validity <code>Promise</code>, rejected if csrf token not set, resolved otherwise</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id=".get">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">static</span> </span>get<span class="signature">(url)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line202">line 202</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote><code>GET</code> HTTP request using the fetch API.<br><code>resolve</code> returns the
response as an <code>Object</code>.<br><code>reject</code> returns an error key as a <code>String</code>.
It is meant to perform API call to access database through the user interface.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>GET</code> url to fetch data from, in supported back URLs</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code></p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id=".getRaw">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">static</span> </span>getRaw<span class="signature">(url)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line252">line 252</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote><code>GET</code> HTTP request using an <code>XMLHttpRequest</code>, with an override
mime type hack to pass bytes through unprocessed.<br><code>resolve</code> returns the response as raw binary data.<br><code>reject</code>
returns an error code as a <code>String</code>.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The url to fetch raw data from</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code></p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id=".getText">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">static</span> </span>getText<span class="signature">(url)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line227">line 227</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote><code>GET</code> HTTP request using the fetch API.<br><code>resolve</code> returns the
response as a <code>String</code>.<br><code>reject</code> returns an error key as a <code>String</code>. It is
meant to perform API call to get HTML templates as string to be parsed as documents/documents fragments.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>GET</code> url to fetch data from, in supported back URLs</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code></p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id=".post">
            
                <span class="type-signature"><span class="icon green">async</span>, <span class="icon green">static</span> </span>post<span class="signature">(url, data)</span><span class="type-signature"> &rarr; {Promise}</span>
                
            
            <div class="container-source members">
                <code><a href="Kom.js.html">Kom.js</a></code>,
                <code><a href="Kom.js.html#line280">line 280</a></code>
            </div>
            
        </h4>

        
    
</dt>
<dd>

    
    <div class="description">
        <blockquote><code>POST</code> HTTP request using the fetch API.<br>Beware that the given options
object match the url expectations.<br><code>resolve</code>
returns the response as an <code>Object</code>.<br><code>reject</code> returns an error key as a <code>String</code>.</blockquote>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>POST</code> url to fetch data from</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>data</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>The <code>JSON</code> object that contains <code>POST</code> parameters</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">Promise</span>





- <p>The request <code>Promise</code></p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            </dl>
    

    

    
</article>

</section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">Kom.js - Version 0.0.1</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'Kom_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>