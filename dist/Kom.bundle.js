window.Kom=function(){"use strict";var e={179:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=Object.freeze({OK:200,NOT_FOUND:404,FORBIDDEN:403,INTERNAL_ERROR:500}),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._csrfToken=this._getCsrfCookie(),this._headers=this._createRequestHeaders()}var t,o;return t=e,(o=[{key:"_getCsrfCookie",value:function(){if(document.cookie&&""!==document.cookie)for(var e=document.cookie.split(";"),t=0;t<e.length;++t){var r=e[t].trim().match(/(\w+)=(.*)/);if(void 0!==r&&"csrftoken"===r[1])return decodeURIComponent(r[2])}return""}},{key:"_createRequestHeaders",value:function(){return[["Content-Type","application/json; charset=UTF-8"],["Accept","application/json"],["X-CSRFToken",this._csrfToken]]}},{key:"_getErrorCodeFromHTTPStatus",value:function(e){return e===n.NOT_FOUND?"B_KOM_NOT_FOUND":e===n.FORBIDDEN?"B_KOM_ACCESS_FORBIDDEN":e===n.INTERNAL_ERROR?"B_KOM_INTERNAL_ERROR":"B_KOM_UNKNOWN_ERROR"}},{key:"_resolveAsJSON",value:function(e){var t=this;return new Promise((function(r,n){e?e.ok?r(e.json()):n(t._getErrorCodeFromHTTPStatus(e.status)):n("F_KOM_MISSING_ARGUMENT")}))}},{key:"_resolveAsText",value:function(e){var t=this;return new Promise((function(r,n){e?e.ok?r(e.text()):n(t._getErrorCodeFromHTTPStatus(e.status)):n("F_KOM_MISSING_ARGUMENT")}))}},{key:"_resolveAsRaw",value:function(e){var t=this;return new Promise((function(r,o){e?e.status===n.OK?r(e.responseText):o(t._getErrorCodeFromHTTPStatus(e.status)):o("F_KOM_MISSING_ARGUMENT")}))}},{key:"checkValidity",value:function(){var e=this;return new Promise((function(t,r){""!==e._csrfToken&&null!==e._headers.length?t():r("F_KOM_INIT_FAILED")}))}},{key:"get",value:function(e){var t=this;return new Promise((function(r,n){var o={method:"GET",headers:new Headers([t._headers[0]])};fetch(e,o).then(t._resolveAsJSON).then(r).catch(n)}))}},{key:"getText",value:function(e){var t=this;return new Promise((function(r,n){var o={method:"GET",headers:new Headers([t._headers[0]])};fetch(e,o).then(t._resolveAsText.bind(t)).then(r).catch(n)}))}},{key:"getRaw",value:function(e){var t=this;return new Promise((function(r,n){var o=new XMLHttpRequest;o.open("GET",e,!0),o.overrideMimeType("text/plain; charset=x-user-defined"),o.onreadystatechange=function(e){4===e.target.readyState&&t._resolveAsRaw(e.target).then(r).catch(n)},o.onerror=n("F_KOM_XHR_ERROR"),o.send()}))}},{key:"post",value:function(e,t){var r=this;return new Promise((function(n,o){var s={method:"POST",headers:new Headers(r._headers),body:JSON.stringify(t)};fetch(e,s).then(r._resolveAsJSON).then(n).catch(o)}))}}])&&r(t.prototype,o),e}();t.default=o}},t={};return function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}(179)}().default;